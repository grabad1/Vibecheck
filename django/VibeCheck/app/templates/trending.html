<!--Dušan Grabović-->
<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trending Playlists</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jersey+15&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link href = "../static/css/korisnik.css" rel = "stylesheet">
    <link rel="stylesheet" href="{% static 'css/CollabPage.css' %}">
    <link rel="stylesheet" href="{% static 'css/trending.css' %}">
</head>

<body>
    <div class="collab-container">
        <header class="top-bar">
            <div class="top-left">
                <a href="{% url 'index' %}"><img class="imgLogo" src="../static/images/logo.png" alt="Logo" /></a>
                <a href="{% url 'index' %}" style="text-decoration: none;"><span class="small-vibe">VibeCheck</span></a>
            </div>
            <div class="top-right-buttons">
                {% if request.user.is_authenticated %}
                <div class = "items">
                            <ul class="navbar-nav">
                                <li class="nav-item">
                                    <a href="{% url 'pricing' %}" class="nav-link active">Get Premium</a>
                                </li>
                            </ul>

                            <ul class="navbar-nav">
                                <li class="nav-item">
                                    <div class="dropdown">
                                        <div class = "dropdown-toggle nav-link" data-bs-toggle = "dropdown">{{request.user.username}}</div>
                                        <ul class="dropdown-menu">
                                            <li><a href="{% url 'passwordChange' %}" class = "dropdown-item">Change password</a></li>
                                            <li><a href="{% url 'logoutuser' %}" class = "dropdown-item">Log out</a></li>
                                            <li><a href="{% url 'help' %}" class = "dropdown-item">Help</a></li>
                                        </ul>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    {% else %}
                    <button class="btn login-btn" onclick="location.href='{% url 'loginuser' %}'">Login</button>
            {% endif %}

            </div>
        </header>

        <div class="content-container">
            <div class="vibe-container">
                <h1 class="vibe-text">Welcome to Trending!</h1>
            </div>
        </div>

        <div class="scroll-indicator">Scroll Down ↓</div>

        <div class="main-wrapper">
            <main class="main-content">
                <div class="sections">
                    <section class="search-section">
                        <ul id="trending-list" class="playlist-grid">

                             {% for r in res %}
                            <li class="playlist-card">
                              <img src="{{ r.photo }}" alt="cover">
                              <div class="playlist-info">
                                <h3>{{ r.playlist.name }}</h3>
                                <p>By {{ r.user.idauth.username }}</p>
                              </div>
                            <div class="pom">
                                <a class="aa" href="{% url 'viewPlaylist' r.playlist.idplaylist %}"><button class="gradientt-btn">Check out!</button></a>

                                </div><div class="playlist-actions">
                                  <form method="post" action="{% url 'like' r.playlist.idplaylist %}">
                                      {% csrf_token %}
                                <button class="like-btn" type="submit" style="opacity:{% if r.liked %} 1 {% else %} 0.4 {% endif %};">❤️ {{ r.likes }}</button>
                                      </form>
                                <a href="{% url 'rate' r.playlist.idplaylist %}">
                                  <div class="rating-display" tabindex="0" aria-label="Ocena plejlistu" style="opacity:{% if r.rated %} 1 {% else %} 0.4 {% endif %};">
                                  <span class="star-icon">⭐</span>
                                  <span class="rating-value">{{ r.rating }}</span>
                                </div></a>
                              </div>
                            </li>
                          {% empty %}
                            <li>No playlists found.</li>
                          {% endfor %}

                        </ul>
                    </section>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script src="{% static 'js/trending.js' %}"></script>
</body>

</html>